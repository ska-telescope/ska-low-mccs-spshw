@startuml

participant "Jupyter\nNotebook\nOET" as Jupyter
participant "TMC" as TMC
participant "MCCS\nController" as MCCS_Controller
participant "MCCS\nStation 1" as MCCS_Station_1
participant "MCCS\nTile 1\n(Download\nFirmware\nCommand)" as MCCS_Tile_1
participant "Tile\nHardware\nManager" as Tile_HW_Man
participant "TPM\nDriver" as TPM_Drv
participant "Hardware\nTile" as HW_Tile
participant "pyfabil\nTPM" as TPM

Jupyter -> TMC: Startup_Telescope()
TMC -> MCCS_Controller: On()
MCCS_Controller -> MCCS_Station_1: On()
MCCS_Station_1 -> MCCS_Tile_1: On()
MCCS_Station_1 <-- MCCS_Tile_1:

MCCS_Station_1 -> MCCS_Tile_1: DownloadFirmware(bitfile)
MCCS_Tile_1 -> Tile_HW_Man: download_firmware(bitfile)
Tile_HW_Man -> TPM_Drv: download_firmware(bitfile)
TPM_Drv -> HW_Tile: program_fpgas(bitfile)
HW_Tile -> HW_Tile: connect()
HW_Tile -> TPM: TPM()
HW_Tile <-- TPM:
HW_Tile -> TPM: connect(...)
HW_Tile <-- TPM:
HW_Tile -> TPM: download_firmware(Device.FPGA_1, bitfile)
HW_Tile <-- TPM:
TPM_Drv <-- HW_Tile:
Tile_HW_Man <-- TPM_Drv:
MCCS_Tile_1 <-- Tile_HW_Man:
MCCS_Station_1 <-- MCCS_Tile_1:

MCCS_Controller <-- MCCS_Station_1:
TMC <-- MCCS_Controller:
Jupyter <-- TMC:

@enduml
