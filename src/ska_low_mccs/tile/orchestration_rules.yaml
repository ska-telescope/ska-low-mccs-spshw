# This file provides rules for how the tile orchestrator should act in response to
# given stimuli in given states.
#
# Each line is a single key-value pair. The key describes a state and a
# stimulus; the value names an action to take when the given stimulus
# occurs when in the given state.
#
# The structure of a key is
#     [
#         DESIRE_ON,  # Stimulus: the operator has invoked the On() command
#         ESTABLISHED,  # State: communication with the subrack is established
#         OFF,  # State: the subrack is powered on but NOT supplying power to the TPM
#         ONLINE,  # State: the operator desires this device to be online
#         DISABLED,  # State: Communication with the TPM is disabled
#     ]
#
# Many keys "stop early". For example, in [DESIRE_ONLINE, DISABLED], the information
# that subrack communications is DISABLED implies that subsequent values are UNKNOWN,
# DISABLED and OFFLINE respectively.

# DISABLED
!!python/tuple [DESIRE_OFFLINE, DISABLED]: []  # already offline
!!python/tuple [DESIRE_ONLINE, DISABLED]: [start_communicating_with_subrack]
!!python/tuple [DESIRE_ON, DISABLED]: [raise_cannot_turn_off_on_when_offline]
!!python/tuple [DESIRE_OFF, DISABLED]: [raise_cannot_turn_off_on_when_offline]
!!python/tuple [SUBRACK_COMMS_DISABLED, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, DISABLED]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, DISABLED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, DISABLED]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, DISABLED]: []  # extremely unlikely race condition

# SUBRACK COMMS NOT ESTABLISHED, TPM IS NO_SUPPLY
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, NO_SUPPLY]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # already online and trying to establish communications
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # already off (because subrack is off)
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established, report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, NO_SUPPLY]: []  # extremely unlikely race condition

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS ON, TPM IS NO_SUPPLY
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ON, NO_SUPPLY]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_no_desire]
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ON, NO_SUPPLY]: []  # already desired_on
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_no_desire]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_established, report_communication_established, report_tpm_off, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ON, NO_SUPPLY]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, NO_SUPPLY]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, NO_SUPPLY]: []  # extremely unlikely race condition

# SUBRACK COMMS ESTABLISHED, TPM IS NO_SUPPLY
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, NO_SUPPLY]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, NO_SUPPLY]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, NO_SUPPLY]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, NO_SUPPLY]: []  # already off (because subrack is off)
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, NO_SUPPLY]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, NO_SUPPLY]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, NO_SUPPLY]: [report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, NO_SUPPLY]: [report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, NO_SUPPLY]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, NO_SUPPLY]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, NO_SUPPLY]: []  # extremely unlikely race condition

# SUBRACK COMMS ESTABLISHED, DESIRED IS ON, TPM IS NO_SUPPLY
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ON, NO_SUPPLY]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ON, NO_SUPPLY]: [set_no_desire]
!!python/tuple [DESIRE_ON, ESTABLISHED, ON, NO_SUPPLY]: []  # already desired_on
!!python/tuple [DESIRE_OFF, ESTABLISHED, ON, NO_SUPPLY]: [set_no_desire]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, NO_SUPPLY]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ON, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ON, NO_SUPPLY]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ON, NO_SUPPLY]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ON, NO_SUPPLY]: [report_tpm_off, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ON, NO_SUPPLY]: [report_tpm_on, start_communicating_with_tpm, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ON, NO_SUPPLY]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, NO_SUPPLY]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ON, NO_SUPPLY]: []  # extremely unlikely race condition

# SUBRACK COMMS NOT ESTABLISHED, TPM IS OFF
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, "OFF"]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, "OFF"]: []  # already online and trying to establish communications
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, "OFF"]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, "OFF"]: []  # already off (because subrack is off)
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "OFF"]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, "OFF"]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, "OFF"]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "OFF"]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "OFF"]: []  # extremely unlikely race condition

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS ON, TPM IS OFF
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ON, "OFF"]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ON, "OFF"]: [set_no_desire]
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ON, "OFF"]: []  # already desired_on
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ON, "OFF"]: [set_no_desire]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, "OFF"]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_established, report_communication_established, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_established, report_communication_established, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ON, "OFF"]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ON, "OFF"]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, "OFF"]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, "OFF"]: []  # extremely unlikely race condition

# SUBRACK COMMS ESTABLISHED, TPM IS OFF
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, "OFF"]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, "OFF"]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, "OFF"]: [turn_tpm_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, "OFF"]: []  # already off
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, "OFF"]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "OFF"]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, "OFF"]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, "OFF"]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, "OFF"]: [report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, "OFF"]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, "OFF"]: [report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, "OFF"]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "OFF"]: []  # extremely unlikely race condition
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, "OFF"]: []  # extremely unlikely race condition

# SUBRACK COMMS NOT ESTABLISHED, TPM IS ON, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, "ON", DISABLED]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, "ON", DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, "ON", DISABLED]: []  # already on
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_established, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", DISABLED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, TPM IS ON, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # already on
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, TPM IS ON, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: []  # already on
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, "ON", ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS ON, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, "ON", DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_no_desire]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, "ON", DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_established, turn_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_subrack_communication_established, start_communicating_with_tpm, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", DISABLED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS ON, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_no_desire]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, turn_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_subrack_communication_established, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", NOT_ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS ON, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_no_desire]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, turn_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, "ON", ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS ESTABLISHED, TPM IS ON, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, "ON", DISABLED]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, "ON", DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, "ON", DISABLED]: []  # already on
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, "ON", DISABLED]: [turn_tpm_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", DISABLED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, "ON", DISABLED]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, "ON", DISABLED]: [report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, "ON", DISABLED]: [report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, "ON", DISABLED]: [start_communicating_with_tpm]  # shouldn't be necessary
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, "ON", DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", DISABLED]: [set_tpm_communication_not_established, report_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", DISABLED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, TPM IS ON, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # already on
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [turn_tpm_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", NOT_ESTABLISHED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, TPM IS ON, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, "ON", ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, "ON", ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, "ON", ESTABLISHED]: []  # already on
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, "ON", ESTABLISHED]: [turn_tpm_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", ESTABLISHED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, "ON", ESTABLISHED]: [report_tpm_power_unknown]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, "ON", ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, "ON", ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, "ON", ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, "ON", ESTABLISHED]: [set_tpm_communication_disabled, report_communication_not_established]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, "ON", ESTABLISHED]: [set_tpm_communication_not_established, report_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, "ON", ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS NOT ESTABLISHED, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_tpm_on]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_on]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_tpm_on, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_on, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_established, report_tpm_on, start_communicating_with_tpm, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_established, report_tpm_on, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS NOT ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established]
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_off, stop_communicating_with_tpm, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_established, report_communication_established, report_tpm_on, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, NOT_ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_tpm_communication_established]

# SUBRACK COMMS ESTABLISHED, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, UNKNOWN, DISABLED]: [stop_communicating_with_subrack]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, UNKNOWN, DISABLED]: [report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, UNKNOWN, DISABLED]: [report_tpm_off]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, UNKNOWN, DISABLED]: [report_tpm_on, start_communicating_with_tpm]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, DISABLED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_on]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [report_tpm_on]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled, report_communication_not_established]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: [set_tpm_communication_not_established, report_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ~, UNKNOWN, ESTABLISHED]: []  # we already knew that

# SUBRACK COMMS ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [report_tpm_no_power_supply, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [report_tpm_off, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [report_tpm_on, start_communicating_with_tpm, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, DISABLED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_on, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, DESIRED IS OFF, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_desired_on]
!!python/tuple [DESIRE_OFF, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [report_tpm_on, turn_tpm_off]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled, report_communication_not_established]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [set_tpm_communication_not_established, report_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, OFF, UNKNOWN, ESTABLISHED]: [] # we already knew that

# SUBRACK COMMS ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS DISABLED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ON, UNKNOWN, DISABLED]: [stop_communicating_with_subrack, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_disabled, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ON, UNKNOWN, DISABLED]: [report_tpm_no_power_supply]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ON, UNKNOWN, DISABLED]: [report_tpm_off, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ON, UNKNOWN, DISABLED]: [report_tpm_on, start_communicating_with_tpm, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, DISABLED]: []  # we already knew that
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_tpm_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, DISABLED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS NOT ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_subrack_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [report_tpm_on, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_disabled]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: []  # we already knew that
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, NOT_ESTABLISHED]: [set_tpm_communication_established, report_communication_established]

# SUBRACK COMMS ESTABLISHED, DESIRED IS ON, TPM IS UNKNOWN, TPM COMMS ESTABLISHED
!!python/tuple [DESIRE_OFFLINE, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [stop_communicating_with_subrack, stop_communicating_with_tpm, set_no_desire]
!!python/tuple [DESIRE_ONLINE, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # already online
!!python/tuple [DESIRE_ON, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [DESIRE_OFF, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_desired_off]
!!python/tuple [SUBRACK_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_disabled, stop_communicating_with_tpm, report_communication_disabled, set_no_desire]
!!python/tuple [SUBRACK_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_subrack_communication_not_established, report_communication_not_established]
!!python/tuple [SUBRACK_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_UNKNOWN, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: []  # we already knew that
!!python/tuple [SUBRACK_SAYS_TPM_NO_SUPPLY, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [report_tpm_no_power_supply, stop_communicating_with_tpm]
!!python/tuple [SUBRACK_SAYS_TPM_OFF, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [report_tpm_off, stop_communicating_with_tpm, turn_tpm_on, set_no_desire]
!!python/tuple [SUBRACK_SAYS_TPM_ON, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [report_tpm_on, set_no_desire]
!!python/tuple [TPM_COMMS_DISABLED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_tpm_communication_disabled, report_communication_not_established]
!!python/tuple [TPM_COMMS_NOT_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [set_tpm_communication_not_established, report_communication_not_established]
!!python/tuple [TPM_COMMS_ESTABLISHED, ESTABLISHED, ON, UNKNOWN, ESTABLISHED]: [] # we already knew that
